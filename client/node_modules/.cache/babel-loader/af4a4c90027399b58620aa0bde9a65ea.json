{"ast":null,"code":"var _jsxFileName = \"H:\\\\CS\\\\BC\\\\eth-todo-list\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport { TODO_LIST_ADDRESS, TODO_LIST_ABI } from './config';\nimport TodoList from './TodoList';\n\nclass App extends Component {\n  componentWillMount() {\n    this.loadBlockchainData();\n  }\n\n  async loadBlockchainData() {\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:7545\"));\n    const accounts = await web3.eth.getAccounts();\n    console.log(accounts[0]);\n    this.setState({\n      account: accounts[0]\n    });\n    const todoList = new web3.eth.Contract(TODO_LIST_ABI, TODO_LIST_ADDRESS);\n    this.setState({\n      todoList\n    });\n    console.log(\"TodoList: \", todoList);\n    var taskCount = await todoList.methods.taskCount().call();\n    taskCount = taskCount.toNumber();\n    this.setState({\n      taskCount\n    });\n    console.log(taskCount);\n\n    for (var i = 1; i <= taskCount; i++) {\n      var duffa = await todoList.methods.tasks(i).call();\n      this.setState({\n        tasks: [...this.state.tasks, duffa]\n      });\n      this.setState({\n        loading: false\n      });\n    }\n\n    console.log(\"Tasks are here\", this.state.tasks);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      taskCount: 0,\n      tasks: [],\n      loading: true\n    };\n    this.createTask = this.createTask.bind(this);\n  }\n\n  createTask(content) {\n    this.setState({\n      loading: true\n    });\n    this.state.todoList.methods.createTask(content).send({\n      from: this.state.account\n    }).then(() => {\n      this.setState({\n        loading: false\n      });\n    }).finally(function () {\n      isLoading = false;\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"main\", {\n      role: \"main\",\n      className: \"col-lg-12 d-flex justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(\"div\", {\n      id: \"loader\",\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Loading...\")) : React.createElement(TodoList, {\n      tasks: this.state.tasks,\n      createTask: this.createTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["H:\\CS\\BC\\eth-todo-list\\client\\src\\App.js"],"names":["React","Component","Web3","TODO_LIST_ADDRESS","TODO_LIST_ABI","TodoList","App","componentWillMount","loadBlockchainData","web3","providers","HttpProvider","accounts","eth","getAccounts","console","log","setState","account","todoList","Contract","taskCount","methods","call","toNumber","i","duffa","tasks","state","loading","constructor","props","createTask","bind","content","send","from","then","finally","isLoading","render"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport Web3 from 'web3'\nimport './App.css';\nimport {TODO_LIST_ADDRESS, TODO_LIST_ABI} from './config'\nimport TodoList from './TodoList'\nclass App extends Component{\n\n  componentWillMount(){\n    this.loadBlockchainData()\n  }\n\n  async loadBlockchainData(){\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:7545\"))\n    const accounts = await web3.eth.getAccounts()\n    console.log(accounts[0])\n    this.setState({ account: accounts[0]})\n    const todoList = new web3.eth.Contract(TODO_LIST_ABI, TODO_LIST_ADDRESS)\n    this.setState({todoList})\n    console.log(\"TodoList: \",todoList)\n    var taskCount = await todoList.methods.taskCount().call()\n    taskCount = taskCount.toNumber() \n    this.setState({ taskCount })\n    console.log(taskCount)\n\n    for (var i=1; i<= taskCount; i++){\n      var duffa = await todoList.methods.tasks(i).call()\n      this.setState({\n        tasks: [...this.state.tasks, duffa]\n      })\n      this.setState({loading: false})\n    }\n    console.log(\"Tasks are here\",this.state.tasks)\n  }\n\n  constructor(props){\n    super(props)\n    this.state = {\n      account: '',\n      taskCount: 0,\n      tasks: [],\n      loading:true\n    }\n    this.createTask = this.createTask.bind(this)\n  }\n  createTask(content){\n    this.setState({ loading : true})\n    this.state.todoList.methods.createTask(content).send({from: this.state.account})\n    .then(() => {\n      this.setState({ loading: false })\n    })\n    .finally(function() { isLoading = false; });\n  }\n\n  render(){\n  return (\n  <div>\n    <div className = \"container-fluid\">\n      <div className=\"row\">\n        <main role=\"main\" className=\"col-lg-12 d-flex justify-content-center\">\n          {this.state.loading \n            ? <div id=\"loader\" className=\"text-center\"><p className=\"text-center\">Loading...</p></div> \n            : <TodoList tasks={this.state.tasks} createTask={this.createTask}/> \n          }\n        </main>\n      </div>\n    </div>\n    </div>\n  );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}